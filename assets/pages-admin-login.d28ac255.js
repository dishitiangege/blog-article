import{z as e,A as a,D as s,K as l,o as r,c as n,S as d,u as o,a4 as t,p as u,t as i,d as p,a as c,T as m,a7 as h,ab as v,_ as y,g as f,bn as _,f as g,O as w,h as b,E as k,i as S,e as V,m as x,bo as I,r as $,q as E}from"./index.c4992b69.js";const U=e({header:{type:String,default:""},bodyStyle:{type:a([String,Object,Array]),default:""},shadow:{type:String,values:["always","hover","never"],default:"always"}}),j=s({name:"ElCard"});const A=v(h(s({...j,props:U,setup(e){const a=l("card");return(e,s)=>(r(),n("div",{class:d([o(a).b(),o(a).is(`${e.shadow}-shadow`)])},[e.$slots.header||e.header?(r(),n("div",{key:0,class:d(o(a).e("header"))},[t(e.$slots,"header",{},(()=>[u(i(e.header),1)]))],2)):p("v-if",!0),c("div",{class:d(o(a).e("body")),style:m(e.bodyStyle)},[t(e.$slots,"default")],6)],2))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/card/src/card.vue"]])),C=y({__name:"login",setup(e){let a="";f((e=>{a=e.from}));const s=_(),l=g(!0),d=g({username:"",password:""}),t=g(!1),p=w((()=>!d.value.username||!d.value.password));b("getUserName").then((e=>{e.username?d.value.username=e.username:t.value=!0,l.value=!1}));const m=async()=>{l.value||(l.value=!0,await h())},h=()=>{b(t.value?"register":"login",d.value).then((e=>{s.userInfo={username:e.username},I("userInfo",s.userInfo),I("uni_id_token",e.token),I("uni_id_token_expired",e.tokenExpired),$.reLaunch(a||"admin/index").then((()=>{E.success("登陆成功")}))})).catch((e=>{l.value=!1}))};return(e,a)=>{const s=k,h=S,v=A;return r(),n("div",{class:"login-wrap"},[V(v,null,{header:x((()=>[c("span",null,i(o(t)?"注册并自动登陆":"登陆 blog"),1)])),default:x((()=>[V(s,{modelValue:o(d).username,"onUpdate:modelValue":a[0]||(a[0]=e=>o(d).username=e),placeholder:"账号"},null,8,["modelValue"]),V(s,{modelValue:o(d).password,"onUpdate:modelValue":a[1]||(a[1]=e=>o(d).password=e),type:"password",placeholder:"密码"},null,8,["modelValue"]),V(h,{type:"primary",loading:o(l),disabled:o(p),onClick:m},{default:x((()=>[u(i(o(t)?"注册":"登陆"),1)])),_:1},8,["loading","disabled"])])),_:1})])}}},[["__scopeId","data-v-7835fade"]]);export{C as default};
