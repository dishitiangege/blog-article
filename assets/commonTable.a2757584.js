import{_ as e,bn as a,f as t,o as l,c as o,a as i,e as s,m as n,p as d,t as c,u as r,l as p,h as u,q as m,i as f,E as b,j as h}from"./index.4bb30206.js";import{S as g,b as _,E as v,a as y}from"./el-table-column.03ca32a3.js";import"./el-checkbox.a6d8fedb.js";import{d as A}from"./formatter.91a3b54e.js";const k=e({__name:"commonTable",props:{title:String,data:String,getApi:String,addApi:String,delApi:String},setup(e){const k=e,C=a(),S=t(!1),V=t("");let j=!1;const x=()=>{j||(j=!0,S.value=!1,u(k.addApi,{name:V.value}).then((e=>{C[k.getApi](),V.value="",m.success("保存成功"),j=!1})).catch((()=>{j=!1})))};let $=[];const T=e=>{$=e},w=()=>{let e=$.length;if(e>0){let a=$.map((e=>e._id));_.confirm(`确定要删除这 ${e} 项吗？`,"彻底删除！！！",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then((()=>{j||(j=!0,u(k.delApi,{ids:a}).then((e=>{C[k.getApi](),m.success("删除成功"),j=!1})).catch((()=>{j=!1})))})).catch((()=>{}))}};return(e,a)=>{const t=f,u=v,m=y,_=b,j=h;return l(),o("div",{class:"container"},[i("div",{class:"tools"},[s(t,{onClick:w,type:"danger"},{default:n((()=>[d("删除选中")])),_:1}),s(t,{onClick:a[0]||(a[0]=e=>S.value=!0),type:"primary"},{default:n((()=>[d(c(`新增${k.title}`),1)])),_:1}),s(t,{onClick:r(C)[k.getApi],icon:r(g),circle:"",style:{float:"right"}},null,8,["onClick","icon"])]),s(m,{data:r(C)[k.data],onSelectionChange:T,style:{width:"100%"}},{default:n((()=>[s(u,{type:"selection",width:"55"}),s(u,{prop:"name",label:`${k.title}名称`},null,8,["label"]),s(u,{prop:"created_date",label:"创建日期",formatter:r(A)},null,8,["formatter"])])),_:1},8,["data"]),s(j,{modelValue:r(S),"onUpdate:modelValue":a[3]||(a[3]=e=>p(S)?S.value=e:null),title:`新增${k.title}`},{footer:n((()=>[s(t,{onClick:a[2]||(a[2]=e=>S.value=!1)},{default:n((()=>[d("取消")])),_:1}),s(t,{type:"primary",disabled:!r(V),onClick:x},{default:n((()=>[d("保存")])),_:1},8,["disabled"])])),default:n((()=>[s(_,{modelValue:r(V),"onUpdate:modelValue":a[1]||(a[1]=e=>p(V)?V.value=e:null),placeholder:`在这里输入${k.title}名称`},null,8,["modelValue","placeholder"])])),_:1},8,["modelValue","title"])])}}},[["__scopeId","data-v-f4d406eb"]]);export{k as c};
